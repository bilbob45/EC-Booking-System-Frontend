<div class="container-fluid booking-container">
  <div class="shuttle-header">
    <a (click)="backCick()"
      ><img
        src="../../assets/icons/chevron-left-arrow.svg"
        width="18"
        height="18"
    /></a>
    <span class="shuttle-title"> {{ booking?.id }}</span>
  </div>
  <div class="shuttle-container row">
    <div class="col-md-5">
      <div>
        <p-galleria
          [value]="images"
          [responsiveOptions]="responsiveOptions"
          [numVisible]="3"
        >
          <ng-template pTemplate="item" let-item>
            <img
              [src]="item.previewImageSrc"
              style="width: 100%; display: block"
            />
          </ng-template>
          <ng-template pTemplate="thumbnail" let-item>
            <div class="grid grid-nogutter justify-content-center">
              <img [src]="item.thumbnailImageSrc" style="display: block" />
            </div>
          </ng-template>
        </p-galleria>
      </div>

      <div class="shuttle-description-container">
        <h3 class="shuttle-description-title">Shuttle Discovery</h3>
        <p class="shuttle-description-copy">
          A space ship themed Demo lab & Alternate reality room aptly named
          Shuttle Discovery after the NASA space of the same name. It is the
          only original Shuttle to survive her final launch and landing unlike
          the Challenger and Columbia. This is where you will discover, test,
          and interact with our solutions.
        </p>
      </div>
    </div>
    <div class="col-md-7 booking-form-container">
      <div
        [ngClass]="{
          'awaiting-booking-notice': bookingStatus === 'Awaiting Approval',
          'approved-booking-notice': bookingStatus === 'Approved',
          'denied-booking-notice': bookingStatus === 'Denied',
          'cancel-booking-notice': bookingStatus === 'Cancelled'
        }"
      >
        <span>{{ bookingStatus }}</span>
      </div>
      <div class="d-flex request-content">
        <div>
          <span class="request-content-title">
            Request ID :
            <span class="request-content-copy">
              {{ booking?.id }}
            </span></span
          >
        </div>
        <div>
          <button
            pButton
            type="button"
            label="Download"
            styleClass="p-button-sm"
            class="p-button-outlined"
          ></button>
        </div>
      </div>
      <div class="d-flex request-content">
        <div>
          <span class="request-content-title">
            Event Date(s) :
            <span class="request-content-copy">{{
              booking?.bookedDates[0].eventDate
            }}</span>
          </span>
        </div>
        <div>
          <div>
            <span class="request-content-title">
              Time Slot(s) :
              <span class="request-content-copy">{{
                booking?.bookedDates[0].time
              }}</span>
            </span>
          </div>
        </div>
      </div>
      <div class="d-flex request-content">
        <div class="d-flex">
          <ul class="request-section">
            <li><span class="request-content-title">Requested By:</span></li>
            <li class="request-section-list">
              <span class="request-content-title">LoS:</span>
            </li>
            <li class="request-section-list">
              <span class="request-content-title">BU:</span>
            </li>
            <li class="request-section-list">
              <span class="request-content-title">Level:</span>
            </li>
          </ul>
          <ul>
            <li><span class="request-content-copy">Ajala Olasunkanmi</span></li>
            <li class="request-section-list">
              <span class="request-content-copy">Advisory</span>
            </li>
            <li class="request-section-list">
              <span class="request-content-copy">Tech Advisory</span>
            </li>
            <li class="request-section-list">
              <span class="request-content-copy">Senior Associate</span>
            </li>
          </ul>
        </div>
        <div class="d-flex">
          <ul class="request-section">
            <li><span class="request-content-title">Requested:</span></li>
            <li class="request-section-list">
              <span class="request-content-title">Requested Time:</span>
            </li>
            <li class="request-section-list">
              <span class="request-content-title">Approved Date:</span>
            </li>
            <li class="request-section-list">
              <span class="request-content-title">Approved Time:</span>
            </li>
          </ul>
          <ul>
            <li>
              <span class="request-content-copy">{{
                booking?.createdAt | date: "d MMM, y"
              }}</span>
            </li>
            <li class="request-section-list">
              <span class="request-content-copy">{{
                booking?.createdAt | date: "shortTime"
              }}</span>
            </li>
            <li class="request-section-list">
              <span class="request-content-copy"
                ><em>{{ bookingStatus }}</em></span
              >
            </li>
            <li class="request-section-list">
              <span class="request-content-copy"
                ><em>{{ bookingStatus }}</em></span
              >
            </li>
          </ul>
        </div>
      </div>
      <div class="d-flex request-content">
        <div>
          <span class="request-content-title">
            Meeting Type:
            <span class="request-content-copy">{{
              booking?.meetingType
            }}</span></span
          >
        </div>
        <div>
          <span class="request-content-title">
            No(s) of Individuals:
            <span class="request-content-copy">
              {{ booking?.numberOfGuests }}
            </span></span
          >
        </div>
      </div>
      <div class="d-flex request-content">
        <div>
          <span class="request-content-title">
            Contact Name:
            <span class="request-content-copy">
              {{ booking?.internalContactPerson }}
            </span></span
          >
        </div>
        <div>
          <span class="request-content-title">
            Phone Number:
            <span class="request-content-copy">
              {{ booking?.contactNumber }}
            </span></span
          >
        </div>
      </div>
      <div class="d-flex request-content border-0">
        <div class="d-flex">
          <ul class="request-section">
            <li><span class="request-content-title">Food:</span></li>
          </ul>
          <ul>
            <li class="">
              <span class="request-content-copy">
                {{ booking?.feedingRequirement }}
              </span>
            </li>
          </ul>
        </div>

        <div class="d-flex">
          <ul>
            <li><span class="request-content-title">Others:</span></li>
          </ul>
          <ul>
            <li>
              <span class="request-content-copy">{{ booking?.notes }}</span>
            </li>
          </ul>
        </div>
      </div>
      <div class="request-content border-0" *ngIf="bookingStatus === 'Denied'">
        <div>
          <span class="cancel-reason-title">
            Reason for decline:
            <span class="request-content-copy">{{
              booking?.comment
            }}</span></span
          >
        </div>
      </div>

      <div
        class="request-content border-0"
        *ngIf="bookingStatus === 'Cancelled'"
      >
        <div>
          <span class="cancel-reason-title">
            Reason for cancellation:
            <span class="request-content-copy">{{
              booking?.comment
            }}</span></span
          >
        </div>
      </div>

      <div *ngIf="showCancel" class="request-section">
        <p-button (click)="showModalDialog()" label="Cancel Booking"></p-button>
        <p-dialog
          [(visible)]="displayModal"
          [modal]="true"
          [style]="{ width: '35vw' }"
          [baseZIndex]="10000"
          [draggable]="false"
          [resizable]="false"
        >
          <div class="cancel-modal">
            <img src="../../../assets/icons/warning.svg" />
            <h3>Cancel Booking</h3>
            <p>
              Are you sure you want to cancel this booking? This slot might be
              unavailable next time.
            </p>
            <form [formGroup]="cancelForm">
              <div>
                <textarea
                  rows="3"
                  cols="30"
                  class="w-100"
                  name="comment"
                  formControlName="comment"
                  id="comment"
                  pInputTextarea
                  placeholder="Reason for cancellation "
                  required
                ></textarea>
              </div>
              <div>
                <div class="mt-3">
                  <div>
                    <button
                      pButton
                      type="button"
                      label="Yes I understand, cancel"
                      (click)="cancelBooking(bookingId)"
                      [disabled]="cancelForm.invalid"
                      styleClass="p-button-sm"
                      class="p-button w-100"
                    ></button>
                  </div>
                  <div class="mt-3">
                    <button
                      pButton
                      type="button"
                      label="Back to Booking"
                      (click)="displayModal = false"
                      styleClass="p-button-sm"
                      class="p-button-outlined w-100"
                    ></button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </p-dialog>
      </div>
      <section *ngIf="showApproval" class="d-flex approval-section">
        <div class="decline-button">
          <button
            pButton
            (click)="showDeclineDialog()"
            styleClass="p-button-sm"
            label="Decline Booking"
            class="p-button-outlined"
          ></button>
          <p-dialog
            [(visible)]="displayModalDecline"
            [modal]="true"
            [style]="{ width: '35vw' }"
            [baseZIndex]="10000"
            [draggable]="false"
            [resizable]="false"
          >
            <div class="cancel-modal">
              <img src="../../../assets/icons/cancel.svg" />
              <h3>Denied Notification</h3>
              <p>
                Et leo, enim in non sed quis sed. Auctor natoque auctor risus
                amet quis mauris. Interdum et nisi, pellentesque id lectus. Ut
                bibendum pellentesque arcu luctus sapien.
              </p>
              <form [formGroup]="declineForm">
                <div>
                  <div>
                    <textarea
                      rows="3"
                      cols="30"
                      class="w-100"
                      formControlName="comment"
                      name="comment"
                      id="comment"
                      pInputTextarea
                      placeholder="Reason for denial "
                      required
                    ></textarea>
                  </div>
                  <div class="mt-3">
                    <div>
                      <button
                        pButton
                        (click)="declineBooking(bookingId)"
                        type="button"
                        label="Submit"
                        styleClass="p-button-sm"
                        class="p-button w-100"
                        [disabled]="declineForm.invalid"
                      ></button>
                    </div>
                    <div class="mt-3">
                      <button
                        pButton
                        type="button"
                        label="Cancel"
                        (click)="displayModalDecline = false"
                        styleClass="p-button-sm"
                        class="p-button-outlined w-100"
                      ></button>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </p-dialog>
        </div>
        <div class="request-section">
          <p-button
            (click)="approveBooking(bookingId)"
            label="Approve Booking"
          ></p-button>
          <p-dialog
            [(visible)]="displayModalApprove"
            [modal]="true"
            [style]="{ width: '35vw' }"
            [baseZIndex]="10000"
            [draggable]="false"
            [resizable]="false"
          >
            <div class="cancel-modal">
              <img src="../../../assets/icons/check-one.svg" />
              <h3>Successfully Approved</h3>
              <p>
                Et leo, enim in non sed quis sed. Auctor natoque auctor risus
                amet quis mauris. Interdum et nisi, pellentesque id lectus. Ut
                bibendum pellentesque arcu luctus sapien.
              </p>

              <div>
                <div class="mt-3">
                  <div>
                    <button
                      pButton
                      type="button"
                      label="Continue"
                      (click)="clickContinue()"
                      styleClass="p-button-sm"
                      class="p-button w-100"
                    ></button>
                  </div>
                  <div class="mt-3">
                    <button
                      pButton
                      type="button"
                      label="Cancel"
                      (click)="displayModalApprove = false"
                      styleClass="p-button-sm"
                      class="p-button-outlined w-100"
                    ></button>
                  </div>
                </div>
              </div>
            </div>
          </p-dialog>
        </div>
      </section>
    </div>
  </div>
</div>
