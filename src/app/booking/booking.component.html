<div class="container-fluid booking-container">
  <p-toast></p-toast>
  <div class="shuttle-header">
    <a routerLink="/rooms"
      ><img
        src="../../assets/icons/chevron-left-arrow.svg"
        width="18"
        height="18"
    /></a>
    <p-dropdown
      inputId="dropdown"
      class="p-inputtext-sm"
      id="header-dropdown"
      [options]="venues"
      [(ngModel)]="selectedVenue"
      (onClick)="goToRoom()"
      optionLabel="name"
    ></p-dropdown>
  </div>
  <div class="shuttle-container row">
    <div class="col-md-5">
      <div>
        <p-galleria
          [value]="images"
          [responsiveOptions]="responsiveOptions"
          [numVisible]="3"
        >
          <ng-template pTemplate="item" let-item>
            <img
              [src]="item.previewImageSrc"
              style="width: 100%; display: block"
            />
          </ng-template>
          <ng-template pTemplate="thumbnail" let-item>
            <div class="grid grid-nogutter justify-content-center">
              <img [src]="item.thumbnailImageSrc" style="display: block" />
            </div>
          </ng-template>
        </p-galleria>
      </div>

      <div class="shuttle-description-container">
        <h3 class="shuttle-description-title">Shuttle Discovery</h3>
        <p class="shuttle-description-copy">
          A space ship themed Demo lab & Alternate reality room aptly named
          Shuttle Discovery after the NASA space of the same name. It is the
          only original Shuttle to survive her final launch and landing unlike
          the Challenger and Columbia. This is where you will discover, test,
          and interact with our solutions.
        </p>
      </div>
    </div>
    <div class="col-md-7 booking-form-container">
      <div class="booking-notice">
        <span
          >Our booking system only allows you to book at least 5 days in
          advance.</span
        >
      </div>
      <div class="booking-form">
        <h3>Basic Details <b>*</b></h3>
        <form
          [formGroup]="bookingForm"
          (ngSubmit)="createBooking(selectedRoom)"
        >
          <div class="p-fluid booking-section">
            <div class="d-flex booking-inputtext-wrapper">
              <div class="field col-6 md:col-4 booking-inputtext">
                <p-dropdown
                  inputId="dropdown"
                  class="p-inputtext-sm"
                  [autoDisplayFirst]="false"
                  [options]="meetingTypes"
                  optionValue="name"
                  formControlName="meetingType"
                  name="meetingType"
                  placeholder="Select Meeting Type"
                  optionLabel="name"
                  [required]="true"
                ></p-dropdown>
              </div>
              <div class="field col-6 md:col-4">
                <input
                  type="text"
                  id="inputtext"
                  class="p-inputtext-sm"
                  placeholder="Client Company Name"
                  name="clientCompanyName"
                  pInputText
                  formControlName="clientCompanyName"
                  required
                />
                <p-message
                  severity="error"
                  text="Client Company name is required"
                  *ngIf="
                    !bookingForm.controls['clientCompanyName'].valid &&
                    bookingForm.controls['clientCompanyName'].dirty
                  "
                ></p-message>
              </div>
            </div>
            <div class="d-flex booking-inputtext-wrapper">
              <div class="field col-6 md:col-4 booking-inputtext">
                <input
                  type="text"
                  id="inputtext"
                  class="p-inputtext-sm"
                  placeholder="Engagement Leader"
                  name="engagementLeader"
                  pInputText
                  formControlName="engagementLeader"
                  required
                />
              </div>
              <div class="field col-6 md:col-4">
                <input
                  type="text"
                  id="inputtext"
                  class="p-inputtext-sm"
                  placeholder="Number of Individuals Expected"
                  name="numberOfGuests"
                  pInputText
                  formControlName="numberOfGuests"
                  required
                />
              </div>
            </div>
            <div class="p-fluid w-627">
              <div class="accordion accordion-flush" id="accordionFlushExample">
                <div class="accordion-item">
                  <h2 class="accordion-header d-flex" id="flush-headingOne">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#flush-collapseOne"
                      aria-expanded="false"
                      aria-controls="flush-collapseOne"
                    >
                      Appointment
                      <img
                        class="ml-2"
                        src="../../assets/icons/edit-notify.svg"
                      />
                    </button>
                  </h2>
                  <div
                    id="flush-collapseOne"
                    class="accordion-collapse collapse"
                    aria-labelledby="flush-headingOne"
                    data-bs-parent="#accordionFlushExample"
                  >
                    <div class="accordion-body">
                      <div>
                        <div formArrayName="bookedDates">
                          <div
                            *ngFor="
                              let DateModel of DateModels().controls;
                              let x = index
                            "
                            [formGroupName]="x"
                            class="add-appointment-container"
                          >
                            <div class="d-flex w-100 accordion-dates">
                              <div
                                class="p-field w-45 md:col-4 booking-inputtext"
                              >
                                <p-calendar
                                  formControlName="eventDate"
                                  name="eventDate"
                                  dateFormat="dd/mm/yy"
                                  [disabledDates]="invalidDates"
                                  [readonlyInput]="true"
                                  inputId="disableDates"
                                  class="p-inputtext-sm"
                                  placeholder="Select Appointment Date"
                                  [required]="true"
                                  [defaultDate]="dateQuery"
                                ></p-calendar>
                              </div>
                              <div class="field w-45 md:col-4">
                                <p-dropdown
                                  inputId="dropdown"
                                  class="p-inputtext-sm"
                                  [autoDisplayFirst]="false"
                                  [options]="timeSlots"
                                  optionValue="time"
                                  formControlName="time"
                                  name="time"
                                  placeholder="Select Time Slot for Booking"
                                  optionLabel="time"
                                  [required]="true"
                                ></p-dropdown>
                              </div>
                              <div
                                class="field w-10 md:col-4 accordion-dates-delete"
                              >
                                <img
                                  src="../../assets/icons/delete.svg"
                                  (click)="removeDate(x)"
                                />
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="addDateButton" (click)="addDate()">
                          <button type="button" class="add-appointment">
                            <span>+ Add Date</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="p-fluid booking-section">
            <h3>PwC Internal Contact Details<b>*</b></h3>
            <div class="d-flex booking-inputtext-wrapper">
              <div class="field col-6 md:col-4 booking-inputtext">
                <input
                  type="text"
                  id="inputtext"
                  class="p-inputtext-sm"
                  placeholder="Name"
                  name="internalContactPerson"
                  pInputText
                  formControlName="internalContactPerson"
                  required
                />
              </div>
              <div class="field col-6 md:col-4">
                <input
                  type="text"
                  id="inputtext"
                  class="p-inputtext-sm"
                  placeholder="Phone Number"
                  name="contactNumber"
                  pInputText
                  formControlName="contactNumber"
                  required
                />
              </div>
            </div>
          </div>
          <div class="p-fluid">
            <h3>Additional Info</h3>
            <div class="accordion accordion-flush" id="accordionFlushExample">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingOne">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#flush-collapseOne"
                    aria-expanded="false"
                    aria-controls="flush-collapseOne"
                  >
                    Food
                  </button>
                </h2>
                <div
                  id="flush-collapseOne"
                  class="accordion-collapse collapse"
                  aria-labelledby="flush-headingOne"
                  data-bs-parent="#accordionFlushExample"
                >
                  <div class="accordion-body">
                    <div>
                      <div class="additional-info-accordion">
                        <span class="additional-info-accordion-title"
                          >Will food be required?</span
                        >
                        <!-- <p-inputSwitch
                            formControlName="feedingRequirement"
                            name="feedingRequirement"
                          ></p-inputSwitch> -->
                      </div>
                      <textarea
                        rows="5"
                        cols="30"
                        pInputTextarea
                        formControlName="feedingRequirement"
                        name="feedingRequirement"
                        placeholder="Any other comment, dietary requirements, etc "
                        required
                      ></textarea>
                    </div>
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwo">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#flush-collapseTwo"
                    aria-expanded="false"
                    aria-controls="flush-collapseTwo"
                  >
                    Notes
                  </button>
                </h2>
                <div
                  id="flush-collapseTwo"
                  class="accordion-collapse collapse"
                  aria-labelledby="flush-headingTwo"
                  data-bs-parent="#accordionFlushExample"
                >
                  <div class="accordion-body">
                    <div>
                      <textarea
                        rows="5"
                        cols="30"
                        formControlName="notes"
                        name="notes"
                        pInputTextarea
                        placeholder="Any other thing we should know about the guest, event, meeting/engagement etc? "
                        required
                      ></textarea>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-4">
            <div class="submit-container">
              <button
                pButton
                type="button"
                label="Cancel"
                styleClass="p-button-sm"
                class="p-button-outlined"
              ></button>
              <p-button
                type="submit"
                label="Submit"
                class="submit-button"
                [disabled]="bookingForm.invalid"
              ></p-button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
